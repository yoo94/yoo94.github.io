---
layout: post
title:  "commonjs amd"
summary: "ì´ì œëŠ” ì‚¬ì¥ëœ... ê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬.."
author: yoo94
date: '2023-05-05 18:35:23 +0530'
category: requirejs
tags: requirejs
keywords: requirejs
thumbnail: https://avatars.githubusercontent.com/u/1781835?s=280&v=4
permalink: /blog/requirejscommonjs/
---
ì¼ë°˜ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œëŠ” AMD(Asynchronous Module Definition)ê°€, ì„œë²„ ì¸¡ì—ì„œëŠ” CommonJSê°€ ì í•©í•˜ë‹¤ëŠ” ì£¼ì¥ì—ëŠ” ëª‡ ê°€ì§€ ì´ìœ ê°€ ìˆìŠµë‹ˆë‹¤.

1. **í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œì˜ ë¹„ë™ê¸° ë¡œë”©**: í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ìì›ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì—¬ëŸ¬ ëª¨ë“ˆì´ ë™ì‹œì— ë¡œë“œë˜ì–´ì•¼ í•˜ê³ , AMDëŠ” ì´ëŸ¬í•œ ë¹„ë™ê¸° ë¡œë”©ì„ ì§€ì›í•˜ì—¬ í˜ì´ì§€ì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

2. **ë¸Œë¼ìš°ì € í™˜ê²½ì˜ ëª¨ë“ˆ ì‹œìŠ¤í…œ**: ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ì—†ìœ¼ë©°, AMDëŠ” ì´ëŸ¬í•œ ë¶€ì¡±í•œ ë¶€ë¶„ì„ ë³´ì™„í•©ë‹ˆë‹¤. AMDëŠ” ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ëª¨ë“ˆì„ ì •ì˜í•˜ê³  ë¡œë“œí•˜ëŠ”ë° ì í•©í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

3. **ì˜ì¡´ì„± ê´€ë¦¬**: AMDëŠ” ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ì§€ì›í•˜ì—¬ ëª¨ë“ˆ ê°„ì˜ ì˜ì¡´ì„±ì„ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë³µì¡í•œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ëª¨ë“ˆ ê°„ì˜ ì˜ì¡´ì„±ì„ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.


ë°˜ë©´ì— ì„œë²„ ì¸¡ì—ì„œëŠ” CommonJSê°€ ì¼ë°˜ì ìœ¼ë¡œ ì„ í˜¸ë©ë‹ˆë‹¤.

1. **ë™ê¸°ì  ë¡œë”©**: ì„œë²„ ì¸¡ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ìì›ì„ ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œí•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ì´ëŠ” ì„œë²„ í™˜ê²½ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì´ë‚˜ ë¹„ë™ê¸°ì  ë¡œë”©ì´ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©°, ëª¨ë“ˆ ë¡œë”©ì„ ìœ„í•œ ì¶”ê°€ ì˜¤ë²„í—¤ë“œë¥¼ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. **ë„¤ì´í‹°ë¸Œ ì§€ì›**: Node.jsì™€ ê°™ì€ ì„œë²„ ì‚¬ì´ë“œ í™˜ê²½ì—ì„œëŠ” CommonJS ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ë„¤ì´í‹°ë¸Œë¡œ ì§€ì›ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì„œë²„ ì¸¡ì—ì„œëŠ” CommonJSë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì¶”ê°€ì ì¸ ì„¤ì •ì´ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í•„ìš”ì„±ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.

## CJS, AMD, UMD, ESMì˜ ëª©ì 

> ì²˜ìŒ JSëŠ” ëª¨ë“ˆë¡œ ê°€ì ¸ì˜¤ê±°ë‚˜ ë‚´ë³´ë‚´ëŠ” ë°©ë²•ì´ ì—†ì–´, í•˜ë‚˜ì˜ íŒŒì¼ì— ëª¨ë“  ê¸°ëŠ¥ì„ ë‹´ì•„ì•¼ í–ˆë‹¤.
>
> **JS í”„ë¡œê·¸ë¨ì„ ëª¨ë“ˆë¡œ ê°œë°œí•˜ê³ , ë°°í¬**í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•˜ì—¬,
>
> CJS, AMD, UMD, ESMì„ ê°œë°œí–ˆë‹¤.

## CJS - CommonJS

> javascriptë¥¼ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì•„ë‹ˆë¼, ë‹¤ë¥¸ ê³³ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” API

### APIë€?
í”„ë¡œê·¸ë˜ë° APIë€?

APIë€? ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ë¼ë¦¬ ì—°ê²°í•´ì£¼ëŠ” ë„êµ¬ Application Programming Interface ì•± í”„ë¡œê·¸ë˜ë° ì¸í„°í˜ì´ìŠ¤ API ì˜ˆì‹œ REST API : ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì—°ê²° GraphQL API : ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì—°ê²°


### CJS êµ¬ë¬¸ ( ì‚¬ìš©ë²• )

```javascript
Copy// requireë¥¼ í†µí•´ ëª¨ë“ˆì„ ë³€ìˆ˜ì— ë‹´ì„ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤
var lib = require('package/lib');

// ê°€ì ¸ì˜¨ ëª¨ë“ˆì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.
function foo() {
  lib.log('hello world!');
}

// foo í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡, ë‹¤ë¥¸ ëª¨ë“ˆë¡œ ì¶”ì¶œí•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤
exports.foobar = foo;
```

### CJS íŠ¹ì§• - ë™ê¸°ì  ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

### ë™ê¸°ì  ë°©ì‹ì´ë€?

í”„ë¡œê·¸ë˜ë° ë™ê¸°ì²˜ë¦¬, ë¹„ë™ê¸°ì²˜ë¦¬ ë€?

ë™ê¸°(synchronous) ì²˜ë¦¬ ì´ì „ ì‘ì—…ì´ ëë‚˜ì•¼, ë‹¤ìŒ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ ë¹„ë™ê¸°(asynchronous) ì²˜ë¦¬ ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ // ìŠ¤íŠ¸ë¦¬ë°ë„ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ì¤‘ì— í•˜ë‚˜ë‹¤.
### ë™ê¸°ì  ë°©ì‹ ì˜ˆì‹œ

```javascript
var foo = require('foo');
var bar = require('bar');

foo.log('It is foo');
bar.log('It is bar');


// ì¶œë ¥ ê²°ê³¼
//It is foo
//It is bar
```

### CJSë¥¼ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

- Node.js
- PINF

## AMD (Asynchronous Module Definition)

> CommonJSëŠ” ëª¨ë“  íŒŒì¼ì´ ë¡œì»¬ ë””ìŠ¤í¬ì— ìˆì–´, í•„ìš”í•  ë•Œ ë°”ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆëŠ” ìƒí™©ì—ì„œë§Œ ì‚¬ìš©í•œë‹¤.  
> ë¸Œë¼ìš°ì €ì—ì„œ ì´ëŸ° ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´, í•„ìš”í•œ ëª¨ë“ˆì´ ëª¨ë‘ ë‹¤ìš´ë¡œë“œë  ë•Œê¹Œì§€ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ë‹¤.
>
> ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” APIì¸, AMDë¥¼ ë§Œë“¤ì—ˆë‹¤.

### [AMD êµ¬ë¬¸ ( ì‚¬ìš©ë²• )](https://defineall.tistory.com/916#AMD%20%EA%B5%AC%EB%AC%B8%20(%20%EC%82%AC%EC%9A%A9%EB%B2%95%20)-1)

```javascript
Copy// myModule.js
// defineì„ ì´ìš©í•´ ìƒˆë¡œìš´ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ê³ , ì½œë°±í•¨ìˆ˜ë¡œ ì „í•´ì¤Œ
define(['package/lib'], function (lib) {

  // ì½œë°±í•¨ìˆ˜ ì´ìš©í•´ì„œ, ë¶ˆëŸ¬ì˜¨ ëª¨ë“ˆ ì‚¬ìš©ê°€ëŠ¥
  function foo () {
    lib.log('hello world!');
  }
  
  // ë‹¤ë¥¸íŒŒì¼ì—ì„œ fooí•¨ìˆ˜ë¥¼, foobarì´ë€ ì´ë¦„ì˜ ëª¨ë“ˆë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆê²Œ ë§Œë“¬
  return {
    foobar: foo
  };
});
```

```javascript
Copy// ìœ„ì—ì„œ ì„ ì–¸í•œ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
require(['package/myModule'], function (myModule) {
  myModule.foobar();
});
```

### [AMDë¥¼ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬](https://defineall.tistory.com/916#AMD%EB%A5%BC%20%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%20%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-1)

- RequireJS
- PINF

## [ğŸ‘‰Â UMD (Univarsal Module Definition)](https://defineall.tistory.com/916#%F0%9F%91%89%C2%A0UMD%20(Univarsal%20Module%20Definition)-1)

> AMDì™€ CommonJSê°€ ì„œë¡œ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ API

### [UMD êµ¬ë¬¸ ( ì‚¬ìš©ë²• )](https://defineall.tistory.com/916#UMD%20%EA%B5%AC%EB%AC%B8%20(%20%EC%82%AC%EC%9A%A9%EB%B2%95%20)-1)

```javascript
Copy(function (root, factory) {
  if(typeof define === 'function' && define.amd) {
    // defineì´ í•¨ìˆ˜ì´ê³ , define.amdê°€ ì¡´ì¬í• ë•Œ AMDì‚¬ìš©
    define(['exports', 'b'], factory);
  } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {
    // exportê°€ ê°ì²´ì´ê³ , export.nodeNameì´ ë¬¸ìì—´ì´ ì•„ë‹ë•Œ, CommonJSì‚¬ìš©
    factory(exports, require('b'));
  } else {
    //Browser globals
    factory((root.commonJsStrict = {}), root.b);
  }
}(this, function (exports, b) {
  // use b in some fashion.
  // attach properties to the exports object to define
  // the
  exports.action = function () {};
}));
```

### UMD íŠ¹ì§• - ì—¬ëŸ¬ ëª¨ë“ˆ ë¡œë”ì—ì„œ ì‚¬ìš© ê°€ëŠ¥

AMDì™€ CommonJSì—ì„œ ëª¨ë‘ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.  
AMD - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ
CommonJS - ì„œë²„ ì‚¬ì´ë“œ




### ESM íŠ¹ì§• - javascript ìì²´ ëª¨ë“ˆ ì‹œìŠ¤í…œ
ECMAScriptì—ì„œ ì§€ì›í•˜ëŠ” ìë°” ìŠ¤í¬ë¦½íŠ¸ ê³µì‹ ëª¨ë“ˆ
importì™€ exportë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ê°€ ë§ìœ¼ë¯€ë¡œ, ë²ˆë“¤ëŸ¬ë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼í•œë‹¤.
scriptíƒœê·¸ì— type="module"ì„ ì„ ì–¸í•˜ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ëª¨ë“ˆë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  
  
ì´ë•Œ, ëª¨ë“ˆì´ë¼ëŠ” ê²ƒì„ ì •í™•íˆ í‘œí˜„í•˜ê¸° ìœ„í•´ mjs í™•ì¥ìë¥¼ ì‚¬ìš©í•˜ë„ë¡ ê¶Œì¥í•œë‹¤.

```javascript
<html>
<body>
  <script type="module" src="foo.mjs"></script>
  <script type="module" src="foo.mjs"></script>
</body>
</html>
```

```javascript
Copy// foo.mjs
var x = 'foo';

console.log(x);  // foo

console.log(window.x);
```

```javascript
Copy// bar.mjs
// importë¥¼ ì‚¬ìš©í•´, ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¨ë‹¤

import test from "./module.mjs";
console.log(test);

var x = 'bar';

console.log(x);

console.log(window.x);
```

```javascript
Copy// module.mjs
const test = 'hello world';

// exportë¥¼ ì‚¬ìš©í•´, ëª¨ë“ˆë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆë‹¤.
export default test;

```